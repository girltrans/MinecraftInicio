<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="description" content="Criar as suas Próprias Skins de Minecraft, A Partir do zero. ou Editar Skins existentes no seu Navegador.">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="x-rim-auto-match" content="none">
    <title>Minecraft Início</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">

    <link rel="dns-prefetch" href="//www.statcounter.com">
    <link rel="dns-prefetch" href="//cdn.domain.com">
    <link rel="preconnect" href="//www.statcounter.com" crossorigin>
    <link rel="preconnect" href="//cdn.domain.com" crossorigin>

    <link rel="icon" type="image/x-icon" href="images/favicon.png">
    <link rel="stylesheet" type="text/css" href="css2/jgrowl.css">
    <link href="css2/styles.css" rel="stylesheet" type="text/css">
    <link href="css2/styles_mike.css" rel="stylesheet" type="text/css">
    <link href="css2/bootstrap_modal.css" rel="stylesheet" type="text/css">
    <link href="css2/select2.css" rel="stylesheet" type="text/css">
    <link href="css2/styles-min3.css" rel="stylesheet" type="text/css">
    <link href="css2/fonts.css" rel="stylesheet" type="text/css">
    <link href="css2/farbtastic.css" rel="stylesheet" type="text/css">

    <style>
        body {
            background-size: cover;
            color: #f7f7fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            min-height: 100vh;
        }
        .content { 
            max-width: 1200px; 
            margin: 0 auto; 
        }

        /* ✅ SOLUÇÃO PARA O SALTO: Esconde o H1 problemático no carregamento inicial */
        .editor-heading {
            display: none;
        }

        input[type="radio"] {
            -webkit-appearance: none; appearance: none;
            width: 12px; height: 12px;
            box-shadow:0 2px 18px #8b1616;
            border-radius: 50%;
            background-color: #1e1e1e;
            cursor: pointer;
            display: inline-block;
            position: relative;
            vertical-align: middle;
        }
        input[type="radio"]:checked { 
            background-color: #E8B901; 
        }
        input[type="radio"], input[type="radio"]:checked { 
            transition: all 0.2s ease-in-out; 
        }
        label { 
            cursor: pointer; 
            font-family: sans-serif; 
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <a href="https://24082004.vercel.app" style="display: flex; align-items: center; text-decoration: none; padding: 0.2rem; border-radius: 10px; transition: background 0.18s;">
            <img src="images/favicon.png" alt="Favicon Logo" style="width: 3.2rem; height: 3.2rem; border-radius: 8px; box-shadow: 0 2px 10px #0004;">
            <span style="font-family: 'Righteous', cursive; font-weight: 700; font-size: 1.9rem; color: #e8b901; margin-left: 0.6rem; user-select: none;">Início</span>
        </a>
        <a href="./index2.html" style="color: #8B1616; font-family: 'Righteous', cursive; font-size: 1.2rem; font-weight: 600; padding: 0.5rem 1.5rem; border-radius: 12px; text-decoration: none;">Minecraft Verificar Nicks</a>
        <b><a href="./index.html" style="color: #e8b901; font-family: 'Righteous', cursive; font-size: 1.2rem; font-weight: 600; padding: 0.5rem 1.5rem; border-radius: 12px; text-decoration: none;">Testar Skin e Capa</a>
        <a href="./index3.html" style="color: #8B1616; font-family: 'Righteous', cursive; font-size: 1.2rem; font-weight: 600; padding: 0.5rem 1.5rem; border-radius: 12px; text-decoration: none;">Editar Skin</a></b>
    </nav>
    
    <div class="content-wrapper">
        <div class="content">
            <a rel="nofollow" href="https://github.com/girltrans" target="_blank" title="GitHub Repositório" class="github"><img src="./icons/github.png" alt="GitHub Icon" title="GitHub"></a>
            <h1 style="text-align:center; color:#8B1616; margin-top:2rem; font-family: 'Righteous', cursive; font-size:2.4rem;">Editar Skin</h1>
            <div style="text-align: center; color:#8B1616; margin-top:2rem; font-family: 'Righteous', cursive;">
                <p style="font-size: 2.4rem; color: #8B1616; margin-top: 5px;">↓ Aviso: ↓</p>
                <p style="font-size: 0.8rem; color: #e8b901; margin-top: 5px;">A Skin É Salva Sempre Que o Usuário Sair ou Recarregar a Página.</p>
            </div>
        </div>

        <div class="wrapper clearfix">
            <div class="main">
                <div class="site-overlay"></div>
                <div class="top-ads">
                    <div class="ads">
                        <div class="top-banner-large">
                            <div style="min-height: 250px; padding-top: 18px;">
                                <div data-pw-desk="leaderboard_atf" id="pwDeskLbAtf"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="content">
                    <h1 class="editor-heading"></h1>
                    
                    <div id="hideBlock" style="display:none;"></div>
                    <div id="lt" style="height:1px;width:1px;display:none;z-index:999999;"></div>
                    <form style="visibility: hidden;" action="" method="POST" id="downloadForm" target="_blank">
                        <input type="hidden" id="imageVal" name="imageVal" value="">
                    </form>
                    <form style="visibility: hidden;" action="/upload/" method="POST" id="skinUploadToSiteForm">
                        <input type="hidden" id="imageEditor" name="imageEditor" value="">
                        <input type="hidden" id="imageEditorPreset" name="imageEditorPreset" value="">
                        <input type="hidden" id="imageEditorPresetSelected" name="imageEditorPresetSelected" value="">
                    </form>

                    <div class="avatar-creator clearfix">
                        <div id="toolbox"></div>
                        <div class="slide-leftbar"><i class="icon-pencil"></i></div>
                        <div class="slide-rightbar"><i class="icon-settings"></i></div>

                        <div class="left-toolbar">
                            <a href="javascript:void(0);" class="tools active" id="colorholder_chose" title="Lápis (p)"><i class="icon-pencil"></i></a>
                            <a href="javascript:void(0);" id="erasepixel" class="tools" title="Borracha (e)"><i class="icon-erase"></i></a>
                            <a href="javascript:void(0);" id="autotone" class="tools" title="Tom Automático (a)"><i class="icon-brush"></i></a>
                            <a href="javascript:void(0);" id="pickcolor" class="tools" title="Seleção De Cores (c)"><i class="icon-pipet"></i></a>
                            <a href="javascript:void(0);" id="bucket" class="tools" title="Balde (b)"><i class="icon-bucket"></i></a>
                            <a href="javascript:void(0);" id="undo" class="tools w50" style="float:left;margin-right:4px;" title="Voltar (u)"><i class="icon-undo"></i></a>
                            <a href="javascript:void(0);" id="redo" class="tools w50" title="Refazer (r)"><i class="icon-redo"></i></a>
                            <a href="javascript:void(0);" id="darker" class="tools w50" style="float:left;margin-right:4px;margin-top:-2px;" title="Escurecer a Cor (z)"><i class="icon-brush-plus"></i></a>
                            <a href="javascript:void(0);" id="lighter" class="tools w50" style="margin-top:-2px;" title="Clarear a Cor (x)"><i class="icon-brush-minus"></i></a>
                            <a href="javascript:void(0);" id="zoom-in" class="tools w50 zoom-in" title="Aumentar o Zoom (q)"><i class="icon-zoom-in"></i></a>
                            <a href="javascript:void(0);" id="zoom-out" class="tools w50 zoom-out" title="Diminuir o Zoom (w)"><i class="icon-zoom-out"></i></a>
                            <a href="javascript:void(0);" id="mirrorTool" class="tools" style="margin-top:-2px;" title="Espelho Ligado/Desligado (m)"><i class="icon-skin"></i></a>
                            <div id="reset" class="reset" title="Limpar Skin">
                                <button class="btn" style="width:90px;">Limpar</button>
                            </div>
                        </div>

                        <div class="left-toolbar-mobile">
                            <div class="tools-wrapper clearfix">
                                <a href="javascript:void(0);" id="mirrorTool" class="tools" title="Espelho Ligado/Desligado (m)"><i class="icon-skin"></i></a>
                                <a href="javascript:void(0);" class="tools active" id="colorholder_chose" title="Lápis (p)"><i class="icon-pencil"></i></a>
                                <a href="javascript:void(0);" id="erasepixel" class="tools" title="Borracha (e)"><i class="icon-erase"></i></a>
                                <a href="javascript:void(0);" id="autotone" class="tools" title="Tom Automático (a)"><i class="icon-brush"></i></a>
                                <a href="javascript:void(0);" id="pickcolor" class="tools" title="Seleção De Cores (c)"><i class="icon-pipet"></i></a>
                                <a href="javascript:void(0);" id="zoom-in" class="tools w50 zoom-in" title="Aumentar o Zoom (q)"><i class="icon-zoom-in"></i></a>
                                <a href="javascript:void(0);" id="bucket" class="tools" title="Balde (b)"><i class="icon-bucket"></i></a>
                                <a href="javascript:void(0);" id="undo" class="tools w50" title="Voltar (u)"><i class="icon-undo"></i></a>
                                <a href="javascript:void(0);" id="redo" class="tools w50" title="Refazer (r)"><i class="icon-redo"></i></a>
                                <a href="javascript:void(0);" id="darker" class="tools w50" title="Escurecer a Cor (z)"><i class="icon-brush-plus"></i></a>
                                <a href="javascript:void(0);" id="lighter" class="tools w50" title="Clarear a Cor (x)"><i class="icon-brush-minus"></i></a>
                                <a href="javascript:void(0);" id="zoom-out" class="tools zoom-out" title="Diminuir o Zoom (w)"><i class="icon-zoom-out"></i></a>
                                <div id="reset" class="reset" title="Limpar Skin">
                                    <button class="btn" style="width:90px;">Limpar</button>
                                </div>
                            </div>
                            <div class="button-wrapper clearfix">
                                <div class="skin-body-overlay"><span class="body-overlay-span">Corpo</span>
                                    <div class="skin-body-overlay-content">
                                        <div class="mobile-right-toggles"></div>
                                    </div>
                                </div>
                                <div class="skin-tools-mobile-wrapper">
                                    <div class="skin-tools mobile">
                                        <div class="selects mobile">
                                            <select id="pxs_mobile" name="pxs">
                                                <option value="4px">Longa Steve (4px)</option>
                                                <option value="3px">Alex  Fina (3px)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="canvas-wrapper">
                            <div class="skin-canvas mobile">
                                <div id="editor"></div>
                            </div>
                        </div>

                        <div class="left-toolbar-tablet">
                            <a href="javascript:void(0);" class="tools active" id="colorholder_chose" title="Lápis (p)"><i class="icon-pencil"></i></a>
                            <a href="javascript:void(0);" id="erasepixel" class="tools" title="Borracha (e)"><i class="icon-erase"></i></a>
                            <a href="javascript:void(0);" id="autotone" class="tools" title="Tom Automático (a)"><i class="icon-brush"></i></a>
                            <a href="javascript:void(0);" id="pickcolor" class="tools" title="Seleção De Cores (c)"><i class="icon-pipet"></i></a>
                            <a href="javascript:void(0);" id="zoom-in" class="tools w50 zoom-in" title="Aumentar o Zoom (q)"><i class="icon-zoom-in"></i></a>
                            <a href="javascript:void(0);" id="bucket" class="tools" title="Balde (b)"><i class="icon-bucket"></i></a>
                            <a href="javascript:void(0);" id="undo" class="tools w50" title="Voltar (u)"><i class="icon-undo"></i></a>
                            <a href="javascript:void(0);" id="redo" class="tools w50" title="Refazer (r)"><i class="icon-redo"></i></a>
                            <a href="javascript:void(0);" id="darker" class="tools w50" title="Escurecer a Cor (z)"><i class="icon-brush-plus"></i></a>
                            <a href="javascript:void(0);" id="lighter" class="tools w50" title="Clarear a Cor (x)"><i class="icon-brush-minus"></i></a>
                            <a href="javascript:void(0);" id="zoom-out" class="tools zoom-out" title="Diminuir o Zoom (w)"><i class="icon-zoom-out"></i></a>
                            <div id="reset" class="reset" title="Limpar Skin">
                                <button class="btn" style="width:90px;">Limpar</button>
                            </div>
                        </div>

                        <div class="right-toolbar">
                            <div class="color-picker">
                                <br>
                                <div id="colorpicker"></div>
                                <form>
                                    <span id="colorSpan" style="visibility: hidden;">
                                        <input type="text" id="color" name="color" value="#123456">
                                    </span>
                                </form>
                            </div>
                            <div class="right-toggles"></div>
                            <div class="skin-tools">
                                <div class="selects">
                                    <select id="pxs" name="pxs">
                                        <option value="4px">Longa Steve (4px)</option>
                                        <option value="3px">Fina Alex (3px)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="right-btns clearfix">
                                <a href="javascript:void(0);"><i class="icon-download" title="Baixar Skin"></i></a>
                                <a href="javascript:void(0);" class="editor_btn3new" data-assert="20"><i class="icon-upload-comp" title="Carregar Skin"></i></a>
                                <div class="downloadError" style="display:none;color:red;padding-left:3px;">Nenhuma Skin Criada.</div>
                                <div class="uploadError" style="display:none;color:red;padding-left:3px;">Não é Possível Carregar Uma Skin Em Branco</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="showSkin" style="display:none;">
                        <canvas class="skin" id="skin" width="64" height="32"></canvas>
                        <canvas class="uploadCanvas" id="uploadCanvas" width="64" height="64"></canvas>
                        <canvas class="skin" id="skinMap" width="512" height="256" style="width: 64px; height: 32px;"></canvas>
                        <span id="hideSkin" style="display:none">◳</span>
                    </div>

                    <div class="right-block-commerce">
                        <div class="right-block-commerce-inner" style="display:block;"></div>
                    </div>

                    <div class="bottom-ads">
                        <div class="ads"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="global_information_modal" tabindex="-1" role="dialog" aria-labelledby="global_information_modal">
        <div class="modal-dialog info-modal" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                    <div class="modal-info">
                        <br>
                        <h3 class="js-header-information-modal"></h3>
                    </div>
                </div>
                <div class="modal-footer modal-info-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Arquivo Inválido</button>
                </div>
            </div>
        </div>
    </div>
    <div class="cmp_ads"></div>

    <script src="js2/mobile-detect.min.js" defer></script>
    <script src="js2/jquery-1.11.3.min.js" defer></script>
    <script src="js2/lazysizes.min.js" defer></script>
    <script src="js2/mobile-menu.js" defer></script>
    <script src="js2/select2.js" defer></script>
    <script src="js2/jquery.cookie.js" defer></script>
    <script src="js2/jgrowl.js" defer></script>
    <script src="js2/util.js" defer></script>
    <script src="js2/resolution-change.js" defer></script>
    <script src="js2/theme-device-manager.js" defer></script>
    <script src="js2/bootstrap_modal.min.js" defer></script>
    <script src="js2/moment.min.js" defer></script>
    <script src="js2/textarea-helper.js" defer></script>
    <script src="js2/bootstrap_tooltip.js" defer></script>
    <script src="js2/user-info-check.js" defer></script>
    <script src="js2/bowser.js" defer></script>
    <script src="js2/three.59.js" defer></script>
    <script src="js2/newOrbit.js" defer></script>
    <script src="js2/app3.js" defer></script>
    <script src="js2/farbtastic.js" defer></script>
    <script src="js2/tinycolor.js" defer></script>

    <script>
        var skindex_url = window.location.protocol + '//' + window.location.hostname + './index3.html';
        var md = new MobileDetect(window.navigator.userAgent);
        if (typeof localStorage === 'object') {
            try {
                localStorage.setItem('localStorage', 1);
                localStorage.removeItem('localStorage');
            } catch (e) {
                Storage.prototype._setItem = Storage.prototype.setItem;
                Storage.prototype.setItem = function () {};
                alert('o nosso browser não suporta o armazenamento de definições localmente. No Safari, a causa mais comum desta situação é a utilização do "Modo de navegação privada". Algumas definições poderão não ser guardadas ou algumas funcionalidades poderão não funcionar corretamente para si. Tente utilizar o modo não privado.');
            }
        }
    </script>
    <script>
        window.currentTheme = "light";
        window.serverDevice = "0";
        window.getUsernameUrl = "/get-username";
        window.addVoteUrl = "/add-vote";
        window.addRankUrl = "/add-rank";
        window.registerUrl = "/register/";
        window.loginUrl = "/login/";
        window.unfollowUserUrl = "/profile/actions/act/unfollow-user";
        window.getVoteCountUrl = "/get-vote";
    </script>
    <script>
        $(document).ready(function () {
            $.removeCookie("uploadFromGrabber");
            localStorage.removeItem('uploadKeyBtn');
            localStorage.removeItem('uploadKey');
            localStorage.removeItem('imageForGrabber');
            var eraseActive = null, pickerActive = null, paintActive = null, brushActive = null, bucketActive = null, mirrorActive = null;

            function toggleBtn(name, shortName) {
                $('.avatar-creator a').removeClass('active');
                $('.avatar-creator #' + name).addClass('active');
            }

            function resetActive() {
                eraseActive = pickerActive = paintActive = brushActive = bucketActive = mirrorActive = null;
            }

            function ColorLuminance(hex, lum, tonik) {
                var rgb = (tonik === "darker") ? tinycolor(hex).darken(5).toString() : tinycolor(hex).lighten(5).toString();
                $("#colorholder_div, #color, .colorbip").css("background", rgb);
                $("#color").val(rgb).trigger('keyup');
                return rgb;
            }

            var setBorderToColor = function () {
                var rgb = tinycolor($('#color').val()).darken(15).toString();
                $('#color').css({ "border-color": rgb, "border-width": "1px !important", "border-style": "solid", "border-radius": "50%" });
            }

            $('#colorpicker').farbtastic('#color').mouseup(function () {
                if (eraseActive === 1) {
                    toggleBtn('colorpicker');
                    resetActive();
                    paintActive = 1;
                    $('#colorholder_chose').addClass('active');
                    setBorderToColor();
                }
            });

            setBorderToColor();
            $('#colorSpan').css('visibility', 'visible');

            $('.avatar-creator #colorholder_chose').on('click', function (e) {
                e.preventDefault();
                toggleBtn('colorholder_chose');
                resetActive();
                paintActive = 1;
                $('#colorholder_chose').addClass('active').removeClass('activeHide');
            });

            $(document).on('paste blur keyup mousemove', '#colorpicker *, #color', function (event) {
                if (event.type == 'paste' || event.type == 'blur') {
                    $("#color").val('');
                    var element = $(event.target);
                    setTimeout(function () {
                        var text = $(element).val();
                        var firstColor = text.charAt(0);
                        if (firstColor !== "#" && text.length > 0) {
                            $("#color").val("#" + text);
                        } else if (text.length >= 7) {
                            $("#color").val(text.slice(0, 7));
                        } else {
                            $("#color").val(text);
                        }
                        $.farbtastic('#colorpicker').setColor($("#color").val());
                        setBorderToColor();
                    }, 100);
                } else {
                    setBorderToColor();
                }
            });

            $('#colorpicker *, #color').on('keyup', function () {
                var curVal = $("#color").val();
                if (curVal.charAt(0) !== "#" && curVal.length > 0) $("#color").val("#" + curVal);
                if (curVal.length >= 7) {
                    $("#color").val(curVal.slice(0, 7)).blur();
                    if (eraseActive === 1 || pickerActive === 1) $('#colorholder_chose').trigger('click');
                    $.farbtastic('#colorpicker').color = $("#color").val();
                }
                setBorderToColor();
            });

            $('#colorpicker *, #color').on('mouseup blur', function () {
                if ($("#color").val() === "" && typeof $.farbtastic('#colorpicker').color !== "undefined") {
                    $("#color").val($.farbtastic('#colorpicker').color).blur();
                    $('#colorholder_chose').trigger('click');
                }
                setBorderToColor();
            });

            $('.avatar-creator #pickcolor').on('click', function (e) { e.preventDefault(); toggleBtn('pickcolor'); resetActive(); pickerActive = 1; });
            $('.avatar-creator #bucket').on('click', function (e) { e.preventDefault(); toggleBtn('bucket'); resetActive(); $('#colorholder_chose').addClass('active activeHide'); paintActive = 1; bucketActive = 1; $(this).parent().find('#mirrorTool.mirrorToolOn, #mirrorTool.active').removeClass('active mirrorToolOn').addClass('mirrorToolOff'); });
            $('.avatar-creator #autotone').on('click', function (e) { e.preventDefault(); toggleBtn('autotone'); resetActive(); $('#colorholder_chose').removeClass('activeHide'); brushActive = 1; });
            $('.avatar-creator #erasepixel').on('click', function (e) { e.preventDefault(); toggleBtn('erasepixel'); resetActive(); $('#colorholder_chose').removeClass('activeHide'); eraseActive = 1; });

            $('.avatar-creator #mirrorTool').on('click', function (e) {
                e.preventDefault();
                if ($(this).hasClass('mirrorToolOn')) {
                    mirrorActive = null;
                    $(this).removeClass('mirrorToolOn active');
                } else {
                    if ($('.avatar-creator #autotone').hasClass('active')) brushActive = 1;
                    else if ($('.avatar-creator #colorholder_chose').hasClass('active')) {
                        paintActive = 1;
                        if ($('.avatar-creator #bucket').hasClass('active')) {
                            bucketActive = null;
                            if ($('.left-toolbar-mobile').is(':visible')) $('.left-toolbar-mobile #colorholder_chose, .left-toolbar-tablet #colorholder_chose').addClass('active');
                            else $('.avatar-creator #colorholder_chose').removeClass('activeHide');
                            $('.avatar-creator #bucket').removeClass('active');
                        }
                    }
                    else if ($('.avatar-creator #erasepixel').hasClass('active')) eraseActive = 1;
                    else if ($('.avatar-creator #pickcolor').hasClass('active')) pickerActive = 1;
                    else $('.left-toolbar a').removeClass('active');
                    resetActive();
                    $(this).toggleClass('active mirrorToolOn mirrorToolOff');
                    mirrorActive = $(this).hasClass('mirrorToolOn') ? 1 : null;
                }
            });

            $('.avatar-creator #darker').on('click', function (e) { e.preventDefault(); ColorLuminance($('#color').val(), -0.05, 'darker'); setBorderToColor(); });
            $('.avatar-creator #lighter').on('click', function (e) { e.preventDefault(); ColorLuminance($('#color').val(), 0.05, 'lighter'); setBorderToColor(); });

            function isCanvasBlank(canvas) {
                var blank = document.createElement('canvas');
                blank.width = canvas.width; blank.height = canvas.height;
                return canvas.toDataURL() == blank.toDataURL();
            }

            $('body').on('keydown', function (e) {
                var key = e.which || e.keyCode;
                if (key === 80) $('#colorholder_chose').trigger('click'); // p
                else if (key === 65) $('#autotone').trigger('click'); // a
                else if (key === 67) $('#pickcolor').trigger('click'); // c
                else if (key === 69) $('#erasepixel').trigger('click'); // e
                else if (key === 81) $('.zoom-in').trigger('click'); // q
                else if (key === 87) $('.zoom-out').trigger('click'); // w
                else if (key === 66) $('.avatar-creator #bucket').trigger('click'); // b
                else if (key === 77) $('.avatar-creator #mirrorTool').trigger('click'); // m
                else if (key === 90) { ColorLuminance($('#color').val(), -0.05, 'darker'); setBorderToColor(); } // z
                else if (key === 88) { ColorLuminance($('#color').val(), 0.05, 'lighter'); setBorderToColor(); } // x
            });
        });
    </script>
    <script type="text/html" id="toggles-template">
        <div id="toggles">
            <div class="controls">
                <div title="Ocultar/Mostrar a Pele Do Corpo" class="underlay ed_gridbtn_body"><a id="showObject" class="btn btn-default">Corpo</a></div>
                <div title="Ocultar/Mostrar Sobreposição De Pele" class="overlay ed_gridbtn_overlay"><a id="showOverlay" class="btn btn-default">Interior</a></div>
            </div>
            <div class="model-body">
                <div data-parts="headOverlay,head" class="head ed_head"><a>&nbsp;</a></div>
                <div data-parts="armROverlay,armR" class="armR ed_leftarm"><a>&nbsp;</a></div>
                <div data-parts="bodyOverlay,body" class="body ed_body"><a>&nbsp;</a></div>
                <div data-parts="armLOverlay,armL" class="armL ed_leftarm"><a>&nbsp;</a></div>
                <div data-parts="legROverlay,legR" class="legL ed_leg_left"><a>&nbsp;</a></div>
                <div data-parts="legLOverlay,legL" class="legR ed_leg_right"><a>&nbsp;</a></div>
            </div>
        </div>
    </script>
    <script>
        $(document).ready(function () {
            $('html').addClass('footer-editor');
            $('.body-overlay-span').on('click', function (e) {
                e.preventDefault();
                $('.skin-body-overlay-content').toggleClass('open');
                return false;
            });
            $(document).on('touchstart click', function (evt) {
                if ($(evt.target).is('.body-overlay-span') || $(evt.target).closest('.skin-body-overlay-content').length) return;
                if ($('.skin-body-overlay-content').is('.open')) {
                    $('.skin-body-overlay > span').trigger('click');
                }
            });
            $('#reset').on('click', function(e) {
                e.preventDefault(); 
                window.location.href = 'index3.html';
            });

            function isCanvasBlank(canvas) {
                const blank = document.createElement('canvas');
                blank.width = canvas.width; blank.height = canvas.height;
                return canvas.toDataURL() == blank.toDataURL();
            }

            const downloadButtonLink = $('.right-btns .icon-download').parent('a');
            downloadButtonLink.off('click').on('click', function(e) {
                e.preventDefault();
                const editorCanvas = $('#uploadCanvas')[0];
                if (isCanvasBlank(editorCanvas)) {
                    alert('Não é Possível Baixar Uma Skin Em Branco.');
                } else {
                    try {
                        const link = document.createElement('a');
                        link.download = 'minha_skin.png';
                        link.href = editorCanvas.toDataURL('image/png');
                        link.click();
                        link.remove();
                    } catch (err) {
                        console.error("Erro ao tentar baixar a skin:", err);
                        alert('Ocorreu um erro ao tentar baixar a skin.');
                    }
                }
            });

            if (navigator.userAgent.toLowerCase().includes("firefox")) {
                document.body.style.zoom = "85%";
            }

            if (/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                document.body.classList.add('allow-scroll');
            }
        });
    </script>

</body>
</html>
